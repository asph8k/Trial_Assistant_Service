<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.spring.pr.notice.mapper.IInsappMapper">
	<resultMap type="com.spring.pr.command.TotalApplierVO" id="InsappMap">
		<id column="APP_NUM_SEQ" property="AppNum"/>
		<result column="JOIN_ID" property="JoinId"/>
		<result column="APP_WHTR_INGB" property="AppWhtrIngb"/>
		<result column="APP_DATE" property="AppDate"/>
		<result column="APP_CLASSIFICATION" property="AppClassification"/>
		<result column="APP_NAME" property="AppName"/>
	</resultMap>
	
	<select id="getInsappList" resultMap="InsappMap">
		SELECT * FROM TotalApplier
	</select>
	
	<select id="getInsappTotal" resultType="int">
		SELECT COUNT(*) FROM TotalApplier
	</select>
	
	<select id="getInsappContent" resultMap="InsappMap">
		SELECT ud.join_name, ud.join_pw, ud.join_phone, ud.join_email, ud.join_gen, ud.join_soc_num, ud.join_addr_basic, ud.join_addr_detail,
        		ins.ins_name, ins.ins_phone, ins.ins_addr
		FROM Totalapplier ta INNER JOIN Userbasic ub 
        		ON ta.JOIN_ID = ub.JOIN_ID
   			INNER JOIN Userdetail ud
        		ON ub.JOIN_SOC_NUM = ud.JOIN_SOC_NUM
    		INNER JOIN Ins ins
       			ON ub.JOIN_ID = ins.JOIN_ID
		WHERE ins.join_id = #{JoinId}
	</select>
	
</mapper>